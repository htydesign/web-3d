import{B as e}from"./base-HDikCi6F.js";import{d as t,g as n,j as s,k as a,l as i,F as o,o as r}from"./@vue-H0c_gk4m.js";import{c as d,E as l,B as c,b as m,d as w,S as h,I as u,O as p,G as g,x as v,a as x}from"./three-BHpSmIVb.js";const M=t({__name:"PipeFlowViewThree",setup(t){const M=new class extends e{constructor(){super()}load(){this.init("#webgl"),this.animate(),this.createMesh()}createPoints(e){const t=e.getPoints(50),n=(new d).setFromPoints(t),{count:s,array:a}=n.attributes.position,i=new l({size:1,color:16711680}),o=new c(3,3,3);new m(o,i);const r=new d,g=new Float32Array(300);r.setAttribute("position",new w(g,3));for(let d=0;d<100;d++)g[3*d+0]=5*Math.random()-2.5,g[3*d+1]=5*Math.random()-2.5,g[3*d+2]=1*Math.random()-2.5;r.attributes.position.needsUpdate=!0,new h({uniforms:{time:{value:0}},vertexShader:"\n        \n        void main() {          \n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); \n          gl_PointSize = 5.0;\n        }\n      ",fragmentShader:"\n      \n      void main() {\n       \n        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n      }\n      "});const v=new u(r,i,s),x=new p;let M=0;return v.onBeforeRender=()=>{for(let t=0;t<s;t++){const n=(M+t/s)%1,a=e.getPointAt(n);x.position.copy(a),x.updateMatrix(),v.setMatrixAt(t,x.matrix)}M+=.001,v.instanceMatrix.needsUpdate=!0},v}createMesh(){var e;const t=new g;null==(e=this.scene)||e.add(t);const n=new v([new x(-100,0,100),new x(-50,50,50),new x(0,0,0),new x(50,-50,50),new x(100,0,100)]);t.add(this.createPoints(n))}animate(){var e,t;null==(e=this.stats)||e.begin(),this.timer=requestAnimationFrame((()=>{this.animate()})),this.renderer.render(this.scene,this.camera),null==(t=this.stats)||t.end()}};return n((()=>{M.load()})),s((()=>{M.destroy()})),(e,t)=>(r(),a(o,null,[t[0]||(t[0]=i("div",{id:"webgl"},null,-1)),t[1]||(t[1]=i("div",{class:"title-name"},"粒子管道流动3",-1))],64))}});export{M as default};
