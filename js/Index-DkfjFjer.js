var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{W as t}from"./webgpuBasic-RWdrGxvh.js";import{bs as a,G as i,a as n,C as r,bY as o,o as l,bZ as c}from"./three-BHpSmIVb.js";import{d,g as h,j as m,k as p,l as u,F as b,o as g}from"./@vue-H0c_gk4m.js";import{_ as w}from"./index-DcliGhKH.js";import"./pinia-DiTk8w0t.js";import"./vue-router-DusXlGQI.js";const f=w(d({__name:"Index",setup(e){const d=new class extends t{constructor(){super(new n(0,0,5)),s(this,"uTime",a(0)),s(this,"glassWall",new i),s(this,"isPlaying",!0),s(this,"bgScene",null),s(this,"ktx2Loader")}load(){var e;this.renderer.setClearColor(new r(16777215)),this.init("#webgl"),this.addObject(),this.sceneEnvironment2(),null==(e=this.renderer)||e.setAnimationLoop((()=>{var e,s;null==(e=this.stats)||e.begin(),this.time+=.01,this.uTime.value=this.time,this.renderer.renderAsync(this.scene,this.camera),null==(s=this.stats)||s.end()}))}async addObject(){this.ktx2Loader=await(new o).setTranscoderPath("./jsm/libs/basis/").detectSupportAsync(this.renderer),(new l).setKTX2Loader(this.ktx2Loader).setMeshoptDecoder(c).load("./models/gltf/facecap.glb",(e=>{var s;const t=e.scene.children[0];null==(s=this.scene)||s.add(t);const a=t.getObjectByName("mesh_2");if(a){const e=a.morphTargetInfluences,s=a.morphTargetDictionary;e&&s&&Object.entries(s).forEach((([s,t])=>{this.gui.add(e,t,0,1,.01).name(s).listen()}))}if("speechSynthesis"in window){var i=new SpeechSynthesisUtterance;i.text="a b c d e ",i.lang="zh-CN",i.rate=.5,window.speechSynthesis.speak(i)}}))}};return h((()=>{d.load()})),m((()=>{var e;d.destroy(),null==(e=d.ktx2Loader)||e.dispose()})),(e,s)=>(g(),p(b,null,[s[0]||(s[0]=u("div",{id:"webgl"},null,-1)),s[1]||(s[1]=u("div",{class:"title-name"},"face",-1))],64))}}),[["__scopeId","data-v-ec85c030"]]);export{f as default};
