var e=Object.defineProperty,t=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{bc as i,bd as s,be as n,bf as a,bg as r,bh as h,bi as o,bj as d,bk as l,bl as c,bm as w,bn as m,bo as u,U as b,bp as p,at as g,bq as f,br as y,av as x,bs as v,bt as H,bu as A,bv as W,bw as z,bx as j,by as L,bz as M,bA as F,bB as S,bC as T,bD as C,bE as P,bF as R,bG as E,bH as U,bI as k,bJ as q,bK as I,bL as N,bM as O,bN as _}from"./three-aFiGC2Cx.js";import{d as B,z as D,A as J,g as $,j as G,F as K,o as Q}from"./@vue-DISYwsDo.js";class V{init(e,t,l){const c={type:"PointLight",x:0,y:0,z:0,color:16777215,intensity:1e4,distance:0,decay:2,shadowWidth:1024,shadowHeight:1024,shadowNear:.5,shadowFar:1e3,lightHelper:!1,...l};let w;switch(c.type){case"PointLight":w=new i(c.color,c.intensity,c.distance,c.decay),c.lightHelper&&e.add(new s(w,10));case"AmbientLight":w=new d(c.color,c.intensity);case"SpotLight":w=new o(c.color,c.intensity);case"RectAreaLight":w=new h(c.color,c.intensity);case"HemisphereLight":w=new r(c.color,c.color,c.intensity);case"DirectionalLight":w=new n(c.color,c.intensity),c.lightHelper&&e.add(new a(w,5));default:if(w=new i(c.color,c.intensity,c.distance,c.decay),c.lightHelper){const t=new s(w,10);e.add(t)}}w.position.set(c.x,c.y,c.z),w.castShadow=!0,e.add(w),w.shadow.mapSize.width=c.shadowWidth,w.shadow.mapSize.height=c.shadowHeight,w.shadow.camera.near=c.shadowNear,w.shadow.camera.far=c.shadowFar;const m=t.addFolder(c.type);return m.close(),m.add(w,"intensity",0,1e4,1),m.add(w.position,"x",-1e3,1e3,1),m.add(w.position,"y",-1e3,1e3,1),m.add(w.position,"z",-1e3,1e3,1),w}}class X{constructor(e=new f(0,75,100)){t(this,"scene"),t(this,"camera"),t(this,"innerWidth"),t(this,"innerHeight"),t(this,"renderer"),t(this,"controls"),t(this,"clock"),t(this,"stats"),t(this,"gui"),t(this,"axesHelper",new l(150)),t(this,"time",0),t(this,"timer",0),this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.scene=new c,this.camera=new w(75,innerWidth/innerHeight,.1,2e3),this.camera.position.copy(e),this.renderer=new m({antialias:!0}),this.renderer.setSize(this.innerWidth,this.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=u,this.scene.add(this.axesHelper),this.controls=new b(this.camera,this.renderer.domElement),this.clock=new p,this.gui=new g,this.gui.close(),window.onresize=()=>{this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.camera.aspect=this.innerWidth/this.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.innerWidth,this.innerHeight)}}gridHelper(e=1e3,t=10){var i;const s=new y(e,t);null==(i=this.scene)||i.add(s)}onResize(){this.camera.aspect=window.innerWidth/window.innerHeight}light(e={}){return(new V).init(this.scene,this.gui,e)}init(e){const t=document.querySelector(e);null==t||t.appendChild(this.renderer.domElement),this.stats=new x,null==t||t.appendChild(this.stats.dom)}plane(){var e;const t=new v(100,100),i=new H({color:65280,side:A}),s=new W(t,i);s.rotation.x=Math.PI/2,null==(e=this.scene)||e.add(s)}destroy(){var e,t,i,s;this.gui.close(),this.gui.destroy(),null==(e=this.renderer)||e.dispose(),null==(t=this.scene)||t.children.forEach((e=>{var t;null==(t=this.scene)||t.remove(e)})),null==(i=this.controls)||i.dispose(),null==(s=this.camera)||s.remove(),this.timer&&cancelAnimationFrame(this.timer)}}const Y=["#8c1dff","#f223ff","#ff2976","#ff901f","#ffd318"];(new z).load("../texture/meinv.jpg");const Z=B({__name:"Index",setup(e){const i=new class extends X{constructor(){super(new f(0,0,400)),t(this,"material"),t(this,"dict",".'`^\",:;Il!i~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhao*#MW&8%B@$")}load(){var e;this.renderer.setClearColor(new q(0)),this.init("#webgl"),this.material=function(e){const t=new j,i=document.createElement("video");i.src="./texture/sintel.mp4",i.muted=!0,i.play();const s=new L(i),n=M("aUv"),a=M("aRandom"),r=F(s,n),h=S((()=>{const t=T(r.r,.5).add(a.x.mul(.03)),i=C(P().x.div(e.length).add(R(t.mul(e.length)).div(e.length)),P().y),s=F(e.asciiTexture,i);let n=E(Y[0]);return n=U(n,E(Y[1]),k(.2,t)),n=U(n,E(Y[2]),k(.4,t)),n=U(n,E(Y[3]),k(.6,t)),n=U(n,E(Y[4]),k(.8,t)),s.mul(n)}));return t.colorNode=h(),t}({asciiTexture:this.createAsciiTexture(),length:this.dict.length}),this.addObject(),null==(e=this.renderer)||e.setAnimationLoop((()=>{var e,t;null==(e=this.stats)||e.begin(),this.renderer.renderAsync(this.scene,this.camera),null==(t=this.stats)||t.end()}))}addObject(){var e;const t=50,i=2500,s=10,n=new v(s,s),a=new I(n,this.material,i);let r=new Float32Array(5e3);const h=new Float32Array(i);for(let o=0;o<50;o++)for(let e=0;e<t;e++){const i=o*t+e,n=o*s-250,d=e*s-250,l=0,c=new _;c.makeTranslation(n,d,l),a.setMatrixAt(i,c),r[2*i]=o/49,r[2*i+1]=e/49,h[i]=Math.pow(Math.random(),40)}a.instanceMatrix.needsUpdate=!0,n.setAttribute("aUv",new N(r,2)),n.setAttribute("aRandom",new N(h,1)),null==(e=this.scene)||e.add(a)}createAsciiTexture(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=64*this.dict.length,e.height=64,t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.font="bold 34px monospace",t.textAlign="center";for(let s=0;s<this.dict.length;s++)if(s>30)for(let e=0;e<6;e++)t.filter=`blur(${e}px)`,t.fillText(this.dict[s],64*s+32,46);else t.filter="none",t.fillText(this.dict[s],64*s+32,46);const i=new O(e);return i.needsUpdate=!0,i}createVideoTexture(){}animate(){var e,t;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.renderer.renderAsync(this.scene,this.camera),null==(t=this.stats)||t.end()}};return D((()=>{i.load()})),J((()=>{i.destroy()})),(e,t)=>(Q(),$(K,null,[t[0]||(t[0]=G("div",{id:"webgl"},null,-1)),t[1]||(t[1]=G("div",{class:"title-name"},"ascii",-1))],64))}});export{Z as default};
