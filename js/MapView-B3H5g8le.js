import{a0 as e,at as t,au as o,av as n,ap as a,c as s,V as i,B as r,f as d}from"./three-BusLRLtJ.js";import{A as c}from"./@amap-DgZfE03j.js";import{d as w,z as p,g as l,j as m,F as u,o as h}from"./@vue-B4sUqkWa.js";import{_ as f}from"./index-uN_xPhet.js";import"./pinia-C4SihLJg.js";import"./vue-router-CANWKAPm.js";const g=f(w({__name:"MapView",setup:w=>(p((()=>{c.load({key:"d70a60795659efc7fbaeac74746349c8",version:"2.0",plugins:[],Loca:{version:"2.0.0"}}).then((c=>{const w=new c.Map("webgl",{center:[116.54,39.79],zooms:[2,20],zoom:4,pitch:0,viewMode:"3D",mapStyle:"amap://styles/dark"}),p=w.customCoords;p.setCenter([116.54,39.79]);p.lngLatsToCoords([[116.52,39.79],[116.54,39.79],[116.56,39.79]]);const l=new e(60,window.innerWidth/window.innerHeight,100,1<<30);let m;const u=new t,h=new c.GLCustomLayer({zIndex:120,zoom:4,init:e=>{m=new o({context:e}),m.setPixelRatio(window.devicePixelRatio),m.autoClear=!1;const t=new n(16777215,.3),l=new a(16777215,1);l.position.set(1e3,-100,900),u.add(l),u.add(t),fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000.json").then((e=>e.json())).then((e=>{const t=p.lngLatsToCoords([...e.features[0].geometry.coordinates[0][0]]),o=new s({color:255}),n=[];for(let s=0;s<t.length;s++)n.push(new i(...t[s],4.5));const a=(new r).setFromPoints(n),l=new d(a,o);u.add(l);const m=e.features[0].geometry.coordinates[0][0],h=new c.Polyline({path:m,strokeWeight:4,strokeColor:"white",lineJoin:"round",strokeOpacity:1});w.add(h)}))},render:()=>{m.resetState(),p.setCenter([116.52,39.79]);const{near:e,far:t,fov:o,up:n,lookAt:a,position:s}=p.getCameraParams();l.near=e,l.far=t,l.fov=o,l.position.set(s[0],s[1],s[2]),l.up.set(n[0],n[1],n[2]),l.lookAt(a[0],a[1],a[2]),l.updateProjectionMatrix(),m.render(u,l),m.resetState()}});w.add(h),function e(){w.render(),requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}))})).catch((e=>{}))})),(e,t)=>(h(),l(u,null,[t[0]||(t[0]=m("div",{id:"webgl"},null,-1)),t[1]||(t[1]=m("div",{class:"title-name"},"地图1",-1))],64)))}),[["__scopeId","data-v-36c010a1"]]);export{g as default};
