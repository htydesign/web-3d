var t=Object.defineProperty,n=(n,o,e)=>((n,o,e)=>o in n?t(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e)(n,"symbol"!=typeof o?o+"":o,e);import{B as o}from"./base-BZNSTIbz.js";import{G as e,C as a,F as s,a2 as i,M as h,b as r,a3 as d,a4 as c,E as w,u as l,t as u,a5 as M,a as m,c as P,a6 as p}from"./three-BFl2D3C6.js";import{d as I,z as x,A as g,g as b,j as f,F as B,o as y}from"./@vue-BDXyav1n.js";const v=I({__name:"BaguaView",setup(t){const I=new class extends o{constructor(){super(),n(this,"font"),n(this,"meshGroup",new e)}load(){var t,n;this.init("#webgl"),this.animate(),this.meshGroup.rotateX(-Math.PI/2),null==(t=this.scene)||t.add(this.meshGroup),null==(n=this.camera)||n.position.set(0,50,100);for(let a=0;a<10;a++){const t=Math.pow(2,(o=3,e=6,o=Math.ceil(o),e=Math.floor(e),Math.floor(Math.random()*(e-o+1))+o));this.createRoundBorder(12+4.5*a,t).then((t=>{0===a&&this.create(),this.meshGroup.add(t),9===a&&this.update()}))}var o,e;this.scene.background=new a(3355443),this.loaderFont((()=>{}))}update(){this.meshGroup.children.forEach(((t,n)=>{0!==n&&(n%2==0?new s.Tween(t.rotation).to({z:Math.PI,x:Math.PI},2e3).delay(50*Math.PI*n).start():new s.Tween(t.rotation).to({z:-Math.PI,x:-Math.PI},2e3).delay(50*Math.PI*n).start())}))}create(){const t=new e;this.meshGroup.add(t);const n=new i(10,32,0,Math.PI),o=new h({color:16777215}),a=new h({color:0}),s=new r(n,o),d=new r(n,a);d.rotateZ(Math.PI),t.add(s),t.add(d);const c=new i(5,32),w=new i(2,32),l=new h({color:0}),u=new h({color:16777215}),M=new r(c,l),m=new r(w,u);M.position.set(5,0,.5),m.position.set(6,0,1),s.add(M),s.add(m);const P=new i(5,32),p=new i(2,32),I=new h({color:16777215}),x=new h({color:0}),g=new r(P,I),b=new r(p,x);g.position.set(-5,0,.5),b.position.set(-6,0,1),s.add(g),s.add(b)}loaderFont(t){(new d).load("./fonts/droid/droid_sans_regular.typeface.json",(n=>{this.font=n,t(n)}))}createRoundBorder(t,n){return new Promise((o=>{if(this.font){const e=new c(t,2,2,100),a=new w(e),s=new l(a,new u({color:16777215}));for(let i=0;i<n;i++){const e=new M(i+1+"",{font:this.font,size:n>=24?.5:2,depth:.1});e.computeBoundingBox();const a=e.boundingBox?-.5*(e.boundingBox.max.x-e.boundingBox.min.x):0,d=e.boundingBox?-.5*(e.boundingBox.max.y-e.boundingBox.min.y):0;e.translate(a,d,0);const c=new r(e,new h({color:16777215}));c.position.set(Math.sin(i*(Math.PI/(n/2)))*(t-0),Math.cos(i*(Math.PI/(n/2)))*(t-0),0),c.rotateZ(-i*(Math.PI/(n/2))),s.add(c);const w=new u({color:16777215}),l=[];l.push(new m(Math.sin(i*(Math.PI/(n/2))+Math.PI/n)*(t+2),Math.cos(i*(Math.PI/(n/2))+Math.PI/n)*(t+2),0)),l.push(new m(Math.sin(i*(Math.PI/(n/2))+Math.PI/n)*(t-2),Math.cos(i*(Math.PI/(n/2))+Math.PI/n)*(t-2),0));const I=(new P).setFromPoints(l),x=new p(I,w);s.add(x),o(s)}}else this.loaderFont((e=>{const s=new c(t,2,2,100),i=new w(s),d=new l(i,new u({color:16777215}));if(Math.random()>.5){const t=new h({color:new a(0,0,0)}),n=new r(s,t);d.add(n)}for(let a=0;a<n;a++){const s=new M(a+1+"",{font:e,size:2,depth:.1});s.computeBoundingBox();const i=s.boundingBox?-.5*(s.boundingBox.max.x-s.boundingBox.min.x):0,c=s.boundingBox?-.5*(s.boundingBox.max.y-s.boundingBox.min.y):0;s.translate(i,c,0);const w=new r(s,new h({color:16777215}));w.position.set(Math.sin(a*(Math.PI/(n/2)))*(t-0),Math.cos(a*(Math.PI/(n/2)))*(t-0),0),w.rotateZ(-a*(Math.PI/(n/2))),d.add(w);const l=new u({color:16777215}),I=[];I.push(new m(Math.sin(a*(Math.PI/(n/2))+Math.PI/n)*(t+2),Math.cos(a*(Math.PI/(n/2))+Math.PI/n)*(t+2),0)),I.push(new m(Math.sin(a*(Math.PI/(n/2))+Math.PI/n)*(t-2),Math.cos(a*(Math.PI/(n/2))+Math.PI/n)*(t-2),0));const x=(new P).setFromPoints(I),g=new p(x,l);d.add(g),o(d)}}))}))}animate(){var t,n;null==(t=this.stats)||t.begin(),requestAnimationFrame((()=>{this.animate()})),s.update(),this.renderer.render(this.scene,this.camera),null==(n=this.stats)||n.end()}};return x((()=>{I.load()})),g((()=>{I.gui.close(),I.gui.destroy()})),(t,n)=>(y(),b(B,null,[n[0]||(n[0]=f("div",{id:"webgl"},null,-1)),n[1]||(n[1]=f("div",{class:"title-name"},"九宫八卦阵",-1))],64))}});export{v as default};
