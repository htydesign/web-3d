var e=Object.defineProperty,n=(n,a,t)=>((n,a,t)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t)(n,"symbol"!=typeof a?a+"":a,t);import{B as a}from"./base-BaImv3YL.js";import{d as t,z as o,A as s,g as i,j as r,F as l,o as c}from"./@vue-DISYwsDo.js";import{G as h,C as d,an as u,P as v,M as m,D as g,b as p,S as f,B as w}from"./three-CyihR34C.js";const b=t({__name:"FogView",setup(e){const t=new class extends a{constructor(){super(),n(this,"group",new h)}load(){var e;this.init("#webgl"),this.animate(),this.scene.background=new d(4473924);const n={fog:!1};null==(e=this.scene)||e.add(this.group),this.create(!0),this.gui.add(n,"fog").name("雾化：shader | THREE.Fog").onChange((()=>{this.group.children.length&&(n.fog?(this.scene.fog=new u(4473924,1,500),this.create(!1)):(this.scene.fog=null,this.create(!0)))}))}create(e=!1){var n,a;this.group.children.length&&this.group.clear();const t=new v(2e3,2e3),o=new m({color:3355443,side:g}),s=new p(t,o);s.rotateX(-Math.PI/2),null==(n=this.scene)||n.add(s);const i=new f({transparent:!0,uniforms:{uColor:{value:new d(16777215*Math.random())}},vertexShader:"\n          varying vec3 vPosition;\n          void main() {\n            vPosition =  vec3(projectionMatrix * modelMatrix * vec4( position, 1.0 ));\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }\n        ",fragmentShader:"\n          uniform vec3 uColor;\n\n          varying vec3 vPosition;\n\n          void main(){\n            vec3 center = vec3(0.0, 0.0, 0.0);\n            float dis = length(center.xz - vPosition.xz);\n\n            float alpha = 1.0;\n\n            vec3 color2 = vec3(0.3, 0.3, 0.3);\n\n            vec3 vColor = uColor;\n\n            if(dis >= 400.0){\n              alpha = 0.05;\n            }else if(dis > 200.0 && dis < 400.0){\n              // alpha = 0.1;\n              alpha = smoothstep(0.05, 1.0, 1.0 - (dis - 200.0) / 200.0);   \n              // vColor = mix(uColor,color2,(dis - 200.0) / 200.0);                 \n            }\n            gl_FragColor = vec4(vColor, alpha);               \n            \n          }\n        "}),r=new m({color:new d(16777215*Math.random()),transparent:!0,opacity:1});for(let l=0;l<1e3;l++){const n=75*Math.random()+25,t=new w(10,n,10),o=new p(t,e?i:r);o.position.set(2e3*Math.random()-1e3,n/2+.5,2e3*Math.random()-1e3),null==(a=this.group)||a.add(o)}}animate(){var e,n;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.renderer&&this.renderer.render(this.scene,this.camera),null==(n=this.stats)||n.end()}};return o((()=>{t.load()})),s((()=>{t.destroy()})),(e,n)=>(c(),i(l,null,[n[0]||(n[0]=r("div",{id:"webgl"},null,-1)),n[1]||(n[1]=r("div",{class:"title-name"},"雾化",-1))],64))}});export{b as default};
