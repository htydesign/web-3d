import{y as e,x as t,X as o,_ as n,g as s,E as a,a as i,c as r,a9 as d}from"./three-CfYZB7Pk.js";import{A as c}from"./@amap-DgZfE03j.js";import{d as w,o as p,F as m,G as l,H as u,E as h}from"./@vue-CBatJ08e.js";import{_ as f}from"./index-BC_F54oo.js";import"./pinia-CoEga3Wr.js";import"./vue-router-CaLjEol5.js";import"./tdesign-vue-next-Co06LRxb.js";import"./tdesign-icons-vue-next-Bom3-UyD.js";const g=f(w({__name:"MapView",setup:w=>(p((()=>{c.load({key:"d70a60795659efc7fbaeac74746349c8",version:"2.0",plugins:[],Loca:{version:"2.0.0"}}).then((c=>{const w=new c.Map("webgl",{center:[116.54,39.79],zooms:[2,20],zoom:4,pitch:0,viewMode:"3D",mapStyle:"amap://styles/dark"}),p=w.customCoords;p.setCenter([116.54,39.79]);p.lngLatsToCoords([[116.52,39.79],[116.54,39.79],[116.56,39.79]]);const m=new e(60,window.innerWidth/window.innerHeight,100,1<<30);let l;const u=new t,h=new c.GLCustomLayer({zIndex:120,zoom:4,init:e=>{l=new o({context:e}),l.setPixelRatio(window.devicePixelRatio),l.autoClear=!1;const t=new n(16777215,.3),m=new s(16777215,1);m.position.set(1e3,-100,900),u.add(m),u.add(t),fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000.json").then((e=>e.json())).then((e=>{const t=p.lngLatsToCoords([...e.features[0].geometry.coordinates[0][0]]),o=new a({color:255}),n=[];for(let a=0;a<t.length;a++)n.push(new i(...t[a],4.5));const s=(new r).setFromPoints(n),m=new d(s,o);u.add(m);const l=e.features[0].geometry.coordinates[0][0],h=new c.Polyline({path:l,strokeWeight:4,strokeColor:"white",lineJoin:"round",strokeOpacity:1});w.add(h)}))},render:()=>{l.resetState(),p.setCenter([116.52,39.79]);const{near:e,far:t,fov:o,up:n,lookAt:s,position:a}=p.getCameraParams();m.near=e,m.far=t,m.fov=o,m.position.set(a[0],a[1],a[2]),m.up.set(n[0],n[1],n[2]),m.lookAt(s[0],s[1],s[2]),m.updateProjectionMatrix(),l.render(u,m),l.resetState()}});w.add(h),function e(){w.render(),requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}))})).catch((e=>{}))})),(e,t)=>(h(),m(u,null,[t[0]||(t[0]=l("div",{id:"webgl"},null,-1)),t[1]||(t[1]=l("div",{class:"title-name"},"地图1",-1))],64)))}),[["__scopeId","data-v-36c010a1"]]);export{g as default};
