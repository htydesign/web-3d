var e=Object.defineProperty,n=(n,a,o)=>((n,a,o)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[a]=o)(n,"symbol"!=typeof a?a+"":a,o);import{B as a}from"./base-C-YIOOil.js";import{G as o,C as t,a4 as s,x as i,M as r,D as l,b as c,u as h,g as d}from"./three-BzDGKvaz.js";import{d as u,z as g,A as v,g as m,j as p,F as f,o as w}from"./@vue-B4sUqkWa.js";const b=u({__name:"FogView",setup(e){const u=new class extends a{constructor(){super(),n(this,"group",new o)}load(){var e;this.init("#webgl"),this.animate(),this.scene.background=new t(4473924);const n={fog:!1};null==(e=this.scene)||e.add(this.group),this.create(!0),this.gui.add(n,"fog").name("雾化：shader | THREE.Fog").onChange((()=>{this.group.children.length&&(n.fog?(this.scene.fog=new s(4473924,1,500),this.create(!1)):(this.scene.fog=null,this.create(!0)))}))}create(e=!1){var n,a;this.group.children.length&&this.group.clear();const o=new i(2e3,2e3),s=new r({color:3355443,side:l}),u=new c(o,s);u.rotateX(-Math.PI/2),null==(n=this.scene)||n.add(u);const g=new h({transparent:!0,uniforms:{uColor:{value:new t(16777215*Math.random())}},vertexShader:"\n          varying vec3 vPosition;\n          void main() {\n            vPosition =  vec3(projectionMatrix * modelMatrix * vec4( position, 1.0 ));\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }\n        ",fragmentShader:"\n          uniform vec3 uColor;\n\n          varying vec3 vPosition;\n\n          void main(){\n            vec3 center = vec3(0.0, 0.0, 0.0);\n            float dis = length(center.xz - vPosition.xz);\n\n            float alpha = 1.0;\n\n            vec3 color2 = vec3(0.3, 0.3, 0.3);\n\n            vec3 vColor = uColor;\n\n            if(dis >= 400.0){\n              alpha = 0.05;\n            }else if(dis > 200.0 && dis < 400.0){\n              // alpha = 0.1;\n              alpha = smoothstep(0.05, 1.0, 1.0 - (dis - 200.0) / 200.0);   \n              // vColor = mix(uColor,color2,(dis - 200.0) / 200.0);                 \n            }\n            gl_FragColor = vec4(vColor, alpha);               \n            \n          }\n        "}),v=new r({color:new t(16777215*Math.random()),transparent:!0,opacity:1});for(let t=0;t<1e3;t++){const n=75*Math.random()+25,o=new d(10,n,10),t=new c(o,e?g:v);t.position.set(2e3*Math.random()-1e3,n/2+.5,2e3*Math.random()-1e3),null==(a=this.group)||a.add(t)}}animate(){var e,n;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.renderer&&this.renderer.render(this.scene,this.camera),null==(n=this.stats)||n.end()}};return g((()=>{u.load()})),v((()=>{u.gui.close(),u.gui.destroy()})),(e,n)=>(w(),m(f,null,[n[0]||(n[0]=p("div",{id:"webgl"},null,-1)),n[1]||(n[1]=p("div",{class:"title-name"},"雾化",-1))],64))}});export{b as default};
