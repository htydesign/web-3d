var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{B as s}from"./base-UfGuG_MJ.js";import{s as a,j as n,k as i,X as r,a1 as o,V as l,M as c,b as d,a2 as h,a3 as m,a4 as p,G as w,L as u,e as g,a5 as y,a6 as f,a7 as P,a8 as v,a9 as b,aa as x,Q as A}from"./three-ObQ0v_XT.js";import{d as j,z as W,A as C,g as F,j as L,F as M,o as D}from"./@vue-B4sUqkWa.js";const H=j({__name:"ModelView1",setup(e){const j=new class extends s{constructor(){super(),t(this,"texture"),t(this,"mixer"),t(this,"composer"),t(this,"unifors",{u_center:{value:new a(.3,.3)}}),t(this,"raycaster"),t(this,"pointer",new a),t(this,"modelGrop",[])}load(){this.init("#webgl"),this.animate(),this.light({type:"AmbientLight",x:10,y:10,z:10,intensity:500}),this.gridHelper(),this.create()}create(){var e;null==(e=this.camera)||e.position.set(0,3,4);const t=new n,s=new i;s.setDecoderPath("./draco/"),t.setDRACOLoader(s),t.load("./models/model04.gltf",(e=>{var t,s,n;const i=e.scene;null==(t=this.scene)||t.add(i),this.mixer=new r(i);const j=this.mixer.clipAction(e.animations[0]),W=this.mixer.clipAction(e.animations[2]),C=this.mixer.clipAction(e.animations[4]);W.play(),j.play(),C.play(),W.timeScale=5;const F=new o(new l(0,0,1),0),L=new o(new l(0,0,-1),0),M=new c({color:16777215,wireframe:!0,transparent:!0,opacity:.75}),D=i.clone();D.traverse((e=>{e instanceof d&&(e.material=M,e.material.clippingPlanes=[F])})),i.traverse((e=>{e instanceof d&&(e.material.clippingPlanes=[L])})),null==(s=this.scene)||s.add(D);const H=i.clone(),_=new h,k=new m(75,innerWidth/innerHeight,.1,2e3);k.position.set(0,10,15),new p(k,null==(n=this.renderer)?void 0:n.domElement);const q=new w;q.position.set(10,0,0),_.add(q);const z=new u({color:new g(16777215),depthTest:!0,transparent:!0});H.traverse((e=>{if(e instanceof d){const t=new A,s=new l,a=new l;e.getWorldQuaternion(t),e.getWorldPosition(s),e.getWorldScale(a);const n=new y(e.geometry,20),i=new f(n);z.opacity=1,i.material=z,i.quaternion.copy(t),i.position.copy(s),i.scale.copy(a),q.add(i)}})),this.renderer.localClippingEnabled=!0;const E=this.gui.addFolder("Local Clipping"),G={get Plane(){return F.constant},set Plane(e){L.constant=-e,F.constant=e},get ModelPlane(){return L.constant},set ModelPlane(e){L.constant=e}};E.add(G,"Plane",-3.5,2);const O=.98,Q=1,S=.5,V=new P(this.scene,this.camera),B=new P(_,k);B.clear=!1;const I=new v(new a(window.innerWidth,window.innerHeight),1.5,.4,.85);I.threshold=O,I.strength=Q,I.radius=S;const R=new b;this.composer=new x(this.renderer),this.composer.addPass(V),this.composer.addPass(B),this.composer.addPass(I),this.composer.addPass(R)}))}animate(){var e,t,s,a;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.mixer&&(null==(t=this.mixer)||t.update(this.clock.getDelta())),null==(s=this.raycaster)||s.setFromCamera(this.pointer,this.camera),this.renderer.render(this.scene,this.camera),null==(a=this.stats)||a.end()}};return W((()=>{j.load()})),C((()=>{j.gui.close(),j.gui.destroy()})),(e,t)=>(D(),F(M,null,[t[0]||(t[0]=L("div",{id:"webgl"},null,-1)),t[1]||(t[1]=L("div",{class:"title-name"},"模型1",-1))],64))}});export{H as default};
