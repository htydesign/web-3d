var s=Object.defineProperty,e=(e,t,i)=>((e,t,i)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);import{W as t}from"./webgpuBasic-RWdrGxvh.js";import{bs as i,a as o,C as n,T as a,aW as r,P as l,bC as u,D as c,bi as d,bB as m,bD as b,bE as h,bz as p,bj as g,b as x,bF as j,bG as v,bk as w,bH as P,bI as y,by as f,bJ as A,bK as T,bL as _,bM as C,bN as N,bn as I,bx as O}from"./three-BHpSmIVb.js";import{V as S}from"./virtual-scroll-Dtm-vLdV.js";import{d as V,g as k,j as z,k as B,l as D,F,o as L}from"./@vue-H0c_gk4m.js";import{_ as M}from"./index-DcliGhKH.js";import"./@amap-Bx2D3lnM.js";import"./pinia-DiTk8w0t.js";import"./vue-router-DusXlGQI.js";const W=M(V({__name:"Index",setup(s){const V=new class extends t{constructor(){super(new o(0,0,50)),e(this,"material"),e(this,"slides",[]),e(this,"count",200),e(this,"scrollPosition",0),e(this,"postProcessing"),e(this,"uTime",i(0))}load(){var s,e;this.renderer.setClearColor(new n(0)),this.init("#webgl"),this.addObject(),null==(s=this.controls)||s.dispose(),this.initPostProcessing(),null==(e=this.renderer)||e.setAnimationLoop((()=>{var s,e;null==(s=this.stats)||s.begin(),this.time+=.01,this.uTime.value=this.time,this.slides.map((s=>{s.mesh.position.x=s.originalPosition+this.scrollPosition})),this.renderer.renderAsync(this.scene,this.camera),this.postProcessing.renderAsync(),null==(e=this.stats)||e.end()}));(new S).on((s=>{this.scrollPosition=s.y/10}))}addObject(){var s;const e=(new a).load("./texture/meinv.jpg");e.colorSpace=r;const t=(new a).load("./texture/ocean.jpg");t.colorSpace=r;const i=(new a).load("./texture/vc2.jpg");i.colorSpace=r;const o=[e,t,i],n=new l(40,60,10,10),j=new u({side:c});j.positionNode=d((()=>{const s=m.xyz.toVar(),e=b.mul(s);let t=h(e.x);return s.y.mulAssign(p(.8).add(g(t.mul(.01),2))),s}))();for(let a=0;a<this.count;a++){const e=j.clone();e.map=o[a%o.length];const t=new x(n,e);t.position.x=40*a-40*this.count/2,null==(s=this.scene)||s.add(t),this.slides.push({mesh:t,index:a,originalPosition:t.position.x})}}initPostProcessing(){this.postProcessing=new j(this.renderer);const s=v(this.scene,this.camera).getTextureNode(),e=d((([s,e])=>{const t=s.sub(w(.5)).toVar();t.x.subAssign(P(t.x));const i=y(s.x.sub(.5).div(.5));return t.x.mulAssign(p(1).sub(g(y(t.x),p(.5).mul(.6)))),t.y.mulAssign(p(1).sub(p(.5).mul(g(i,p(1.5))))),t.x.addAssign(this.uTime.mul(.05).mul(P(s.x.sub(.5)))),t.mulAssign(p(100).mul(e)),t})),t=f(.5,.95,y(A.x)),i=f(.2,.5,y(A.x.sub(.5))).oneMinus(),o=e(A,.5),n=e(A,1),a=T(o),r=T(n),l=a.add(r).mul(_.mul(2)),u=w(C(l),N(l)),c=A.add(u.mul(a.mul(.05))),m=I(A,c,t);I(O(0,0,0,1),s.sample(m),i),this.postProcessing.outputNode=s.sample(m)}};return k((()=>{V.load()})),z((()=>{V.destroy()})),(s,e)=>(L(),B(F,null,[e[0]||(e[0]=D("div",{id:"webgl"},null,-1)),e[1]||(e[1]=D("div",{class:"title-name"},"bend(滚动滚轮)",-1))],64))}}),[["__scopeId","data-v-522b5806"]]);export{W as default};
