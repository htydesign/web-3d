import{J as e,H as t,a0 as o,a3 as n,g as a,N as s,a as i,c as r,ae as d}from"./three-g8slYH6C.js";import{A as c}from"./@amap-DgZfE03j.js";import{d as w,z as l,g as p,j as m,F as u,o as h}from"./@vue-BDXyav1n.js";import{_ as f}from"./index-CGqOeqWu.js";import"./pinia-BgosKWnB.js";import"./vue-router-DekMB8ps.js";const g=f(w({__name:"MapView",setup:w=>(l((()=>{c.load({key:"d70a60795659efc7fbaeac74746349c8",version:"2.0",plugins:[],Loca:{version:"2.0.0"}}).then((c=>{const w=new c.Map("webgl",{center:[116.54,39.79],zooms:[2,20],zoom:4,pitch:0,viewMode:"3D",mapStyle:"amap://styles/dark"}),l=w.customCoords;l.setCenter([116.54,39.79]);l.lngLatsToCoords([[116.52,39.79],[116.54,39.79],[116.56,39.79]]);const p=new e(60,window.innerWidth/window.innerHeight,100,1<<30);let m;const u=new t,h=new c.GLCustomLayer({zIndex:120,zoom:4,init:e=>{m=new o({context:e}),m.setPixelRatio(window.devicePixelRatio),m.autoClear=!1;const t=new n(16777215,.3),p=new a(16777215,1);p.position.set(1e3,-100,900),u.add(p),u.add(t),fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000.json").then((e=>e.json())).then((e=>{const t=l.lngLatsToCoords([...e.features[0].geometry.coordinates[0][0]]),o=new s({color:255}),n=[];for(let s=0;s<t.length;s++)n.push(new i(...t[s],4.5));const a=(new r).setFromPoints(n),p=new d(a,o);u.add(p);const m=e.features[0].geometry.coordinates[0][0],h=new c.Polyline({path:m,strokeWeight:4,strokeColor:"white",lineJoin:"round",strokeOpacity:1});w.add(h)}))},render:()=>{m.resetState(),l.setCenter([116.52,39.79]);const{near:e,far:t,fov:o,up:n,lookAt:a,position:s}=l.getCameraParams();p.near=e,p.far=t,p.fov=o,p.position.set(s[0],s[1],s[2]),p.up.set(n[0],n[1],n[2]),p.lookAt(a[0],a[1],a[2]),p.updateProjectionMatrix(),m.render(u,p),m.resetState()}});w.add(h),function e(){w.render(),requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}))})).catch((e=>{}))})),(e,t)=>(h(),p(u,null,[t[0]||(t[0]=m("div",{id:"webgl"},null,-1)),t[1]||(t[1]=m("div",{class:"title-name"},"地图1",-1))],64)))}),[["__scopeId","data-v-36c010a1"]]);export{g as default};
