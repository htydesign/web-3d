var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);import{B as a}from"./base-DI5EaenM.js";import{q as s,V as r,G as i,b as o,x as n,M as x,Q as l,aa as p,ab as h,ac as c,ad as m,a2 as g,ae as u,e as w}from"./three-1nqLwmXn.js";import{d,z as v,A as y,g as j,o as A}from"./@vue-B4sUqkWa.js";const f={id:"webgl"},b=d({__name:"ImageView",setup(e){const d=["vortex11-267x400.jpg","vortex12-320x400.jpg","vortex15-330x400.png","vortex20-267x400.jpg","vortex23-267x400.jpeg","vortex25-400x366.jpeg","vortex26-267x400.jpg","vortex31-267x400.jpg","vortex32-321x400.jpg","vortex33-267x400.jpg","vortex34-267x400.jpg","vortex35-320x400.jpg","vortex36-400x400.jpg","vortex37-320x400.jpg","vortex38-400x267.jpg"];const b=new class extends a{constructor(){super(),t(this,"mixer"),t(this,"mixerArray",[]),t(this,"timeScale",3),t(this,"textureMap",[])}load(){var e,t;this.init("#webgl"),this.animate(),this.loadImage(),null==(e=this.camera)||e.position.set(0,0,350),null==(t=this.controls)||t.update()}loadImage(){const e=new s,t=[];d.forEach((a=>{t.push(new Promise((t=>{e.load("./texture/img-vortex/"+a,(e=>{t(e)}))})))})),Promise.all(t).then((e=>{this.textureMap.push(...e);for(let t=0;t<6;t++){const e=t/6*Math.PI*2,a=300*Math.cos(e),s=300*Math.sin(e);this.createPlane(new r(a,s,0),e)}setTimeout((()=>{for(let e=0;e<this.mixerArray.length;e++)this.mixerArray[e].timeScale=1}),1e3)}))}createPlane(e,t){var a;const s=new i;s.position.copy(e),s.rotateZ(t),null==(a=this.scene)||a.add(s);for(let i=0;i<this.textureMap.length-1;i++){const{width:e,height:t}=this.textureMap[i].source.data,a=new o(new n(e/5,t/5),new x({opacity:.75,transparent:!0,depthTest:!1,map:this.textureMap[i]}));s.add(a);const w=[0,4,5,6,7,7],d=new r(0,0,1),v=(new l).setFromAxisAngle(d,0),y=(new l).setFromAxisAngle(d,-.3),j=new p(".quaternion",w,[v.x,v.y,v.z,v.w,y.x,y.y,y.z,y.w,y.x,y.y,y.z,y.w,y.x,y.y,y.z,y.w,y.x,y.y,y.z,y.w,v.x,v.y,v.z,v.w]),A=new h(".position",w,[0,80,-80,0,-20,-20,-50,-20,20,-170,-20,0,-230,-50,-90,0,80,-80]),f=new h(".scale",w,[1,1,1,1,1,1,.8,.8,.8,.5,.5,.5,.01,.01,.01,1,1,1]),b=new c(".material.opacity",w,[0,1,1,1,1,0]),M=new m("Action0",7,[b,f,A,j]),z=new g(s.children[i]),P=z.clipAction(M);P.loop=u,P.time=i/2,P.play(),z.timeScale=this.timeScale,this.mixerArray.push(z)}}animate(){var e,t;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),w.update(),this.renderer.render(this.scene,this.camera);const a=this.clock.getDelta();for(let s=0;s<this.mixerArray.length;s++)this.mixerArray[s].update(a);null==(t=this.stats)||t.end()}};return v((()=>{b.load()})),y((()=>{b.gui.close(),b.gui.destroy()})),(e,t)=>(A(),j("div",f))}});export{b as default};
