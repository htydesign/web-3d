var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{B as a}from"./base-HDikCi6F.js";import{d as n,g as s,j as o,k as r,l as i,F as m,o as h}from"./@vue-H0c_gk4m.js";import{B as d,j as l,n as w,M as c,b as u,I as p,F as M,H as f,C as g,O as b,a as y,G as x,x as v,u as j,D as F,J as P}from"./three-BHpSmIVb.js";const A=n({__name:"PipeFlowViewFour",setup(e){const n=new class extends a{constructor(){super(),t(this,"geometries",[]),t(this,"time",0)}load(){this.init("#webgl"),this.animate(),this.createMesh(),this.light()}createRandomGeometry(e,t,a){let n;switch(Math.floor(3*Math.random())){case 0:default:n=new d(5*Math.random(),5*Math.random(),5*Math.random());break;case 1:n=new w(2.5*Math.random(),32,32);break;case 2:n=new l(.5*Math.random(),.5*Math.random(),1,32)}n.computeVertexNormals();const s=new c({color:16777215}),o=new u(n,s),r=new p(new M(1,0),new f({color:new g(e,t,a)}),50),i=new b;for(let m=0;m<50;m++){const e=new y;e.x=10*Math.random()-5,e.y=10*Math.random()-5,e.z=10*Math.random()-5;const t=new P;t.x=2*Math.random()*Math.PI,i.position.copy(e),i.rotation.copy(t),i.updateMatrix(),r.setMatrixAt(m,i.matrix)}return o.add(r),o.onBeforeRender=()=>{for(let e=0;e<50;e++)r.rotation.y+=5e-4*Math.random()},o}createMesh(){var e;const t=new x;null==(e=this.scene)||e.add(t);const a=new v([new y(-100,0,100),new y(-50,50,50),new y(0,0,0),new y(50,-50,50),new y(100,0,100)]),n=new j(a,50,10,10,!1),s=new c({transparent:!0,color:16777215,side:F,wireframe:!0});new u(n,s);let o=.5,r=1,i=0;for(let m=0;m<100;m++){o+=.01,i+=.01,r-=.01;const e=this.createRandomGeometry(o,r,i),n=Math.random(),s=a.getPointAt(n);e.position.copy(s),t.add(e),this.geometries.push(e)}}animate(){var e,t;null==(e=this.stats)||e.begin(),this.timer=requestAnimationFrame((()=>{this.animate()})),this.geometries.forEach(((e,t)=>{const a=new v([new y(-100,0,100),new y(-50,50,50),new y(0,0,0),new y(50,-50,50),new y(100,0,100)]),n=(t/this.geometries.length+this.time)%1,s=a.getPointAt(n);e.position.copy(s)})),this.time+=.001,this.renderer.render(this.scene,this.camera),null==(t=this.stats)||t.end()}};return s((()=>{n.load()})),o((()=>{n.destroy()})),(e,t)=>(h(),r(m,null,[t[0]||(t[0]=i("div",{id:"webgl"},null,-1)),t[1]||(t[1]=i("div",{class:"title-name"},"粒子管道流动4",-1))],64))}});export{A as default};
