var s=Object.defineProperty,e=(e,t,i)=>((e,t,i)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);import{W as t}from"./webgpuBasic-RWdrGxvh.js";import{bs as i,G as n,a,C as r,W as l,n as o,bu as h,b as d,j as b,be as g,bi as u,bO as c,bP as m,bQ as p,bR as y,bS as w,bJ as v,bg as x,bT as j,bU as f,bx as W,bk as A}from"./three-BHpSmIVb.js";import{d as L,g as S,j as T,k as _,l as z,F as O,o as P}from"./@vue-H0c_gk4m.js";import{_ as k}from"./index-DcliGhKH.js";import"./pinia-DiTk8w0t.js";import"./vue-router-DusXlGQI.js";const C=k(L({__name:"Index",setup(s){const L=new class extends t{constructor(){super(new a(0,0,50)),e(this,"uTime",i(0)),e(this,"glassWall",new n),e(this,"isPlaying",!0),e(this,"bgScene",null)}load(){var s,e;null==(s=this.scene)||s.add(this.glassWall),this.renderer.setClearColor(new r(16777215)),this.init("#webgl"),this.addObject(),this.addLight(),null==(e=this.renderer)||e.setAnimationLoop((()=>{var s,e;null==(s=this.stats)||s.begin(),this.time+=.01,this.uTime.value=this.time,this.glassWall.visible=!1,this.renderer.setRenderTarget(this.bgScene),this.renderer.renderAsync(this.scene,this.camera),this.glassWall.visible=!0,this.renderer.setRenderTarget(null),this.renderer.renderAsync(this.scene,this.camera),null==(e=this.stats)||e.end()}))}addObject(){var s;this.bgScene=new l(this.innerWidth,this.innerHeight);const e=new o(10,32,32),t=new h({color:3355443,roughness:.5,metalness:.5}),i=new d(e,t);i.position.set(0,0,-20),null==(s=this.scene)||s.add(i);const n=new h({color:16777215,roughness:.1,metalness:0,transparent:!0,transmission:1,thickness:.4,dispersion:5}),a=new b(1,1,40,140,40);(new g).colorNode=u((()=>{const s=c(m.sub(p)).normalize(),e=y(s.negate(),c(w),1/1.31),t=v.add(e.xy.mul(.05)),i=x(this.bgScene.texture,t),n=p.add(e.mul(20)),a=j.mul(f.mul(W(n,1))),r=A(a.xy.div(a.w)).toVar();return r.addAssign(1),r.divAssign(2),r.assign(A(r.x,r.y.oneMinus())),x(this.bgScene.texture,r),i}))();for(let r=0;r<100;r++){const s=new d(a,n);s.position.set(1*(r-50)*2,0,0),this.glassWall.add(s)}}addLight(){this.light({type:"AmbientLight",x:30,y:30,z:30,intensity:1e3}),this.light({type:"PointLight",x:-30,y:30,z:0,intensity:1e3}),this.light({type:"AmbientLight",x:0,y:-30,z:-30,intensity:1e3})}};return S((()=>{L.load()})),T((()=>{L.destroy()})),(s,e)=>(P(),_(O,null,[e[0]||(e[0]=z("div",{id:"webgl"},null,-1)),e[1]||(e[1]=z("div",{class:"title-name"},"glass",-1))],64))}}),[["__scopeId","data-v-97fb8e09"]]);export{C as default};
