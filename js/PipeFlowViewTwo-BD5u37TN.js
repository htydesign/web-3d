import{B as e}from"./base-DSRj1ooT.js";import{V as t,s as n,k as s,aN as a,B as i,l as o,u as r,P as l,f as c,c as d}from"./three-C0SeukxF.js";import{d as u,z as w,A as h,g as m,j as p,F as g,o as v}from"./@vue-B4sUqkWa.js";const f=u({__name:"PipeFlowViewTwo",setup(u){const f=new class extends e{constructor(){super()}load(){this.init("#webgl"),this.animate(),this.createMesh()}createPath(e){const a=e.map((e=>new t(e[0],e[1],e[2]))),i=new n;for(let t=0;t<a.length-1;t++)i.curves.push(new s(a[t],a[t+1]));return i}getTrajectoryPoint(e){const n=2*e,s=Math.sin(e);return new t(n,s,0)}createMesh(){var e,n;const s=new a([new t(-100,0,100),new t(-50,50,50),new t(0,0,0),new t(50,-50,50),new t(100,0,100)]),u=s.getPoints(50),w=(new i).setFromPoints(u),h=new i,{count:m,array:p}=w.attributes.position,g=new Float32Array(3*m);h.setAttribute("position",new o(g,3));for(let t=0;t<m-1;t++){const e=(0+t/m)%1,n=s.getPointAt(e);g[3*t+0]=n.x,g[3*t+1]=n.y,g[3*t+2]=n.z}h.attributes.position.needsUpdate=!0;const v=new r({vertexShader:"\n        void main(){\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          gl_PointSize = 5.0;\n        }\n      ",fragmentShader:"\n        void main(){\n          gl_FragColor = vec4(1.0);\n        }\n      "}),f=new l(h,v);let P=0;f.onBeforeRender=()=>{for(let e=0;e<m;e++){const t=(P+e/m)%1,n=s.getPointAt(t);g[3*e+0]=n.x,g[3*e+1]=n.y,g[3*e+2]=n.z}P+=.001,h.attributes.position.needsUpdate=!0},null==(e=this.scene)||e.add(f);const b=new c(w,new d);null==(n=this.scene)||n.add(b)}animate(){var e,t;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.renderer.render(this.scene,this.camera),null==(t=this.stats)||t.end()}};return w((()=>{f.load()})),h((()=>{f.gui.close(),f.gui.destroy()})),(e,t)=>(v(),m(g,null,[t[0]||(t[0]=p("div",{id:"webgl"},null,-1)),t[1]||(t[1]=p("div",{class:"title-name"},"粒子管道流动",-1))],64))}});export{f as default};
