var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{B as s}from"./base-Djv5PkSt.js";import{i as n,o as a,l as i,p as r,a as o,q as l,r as d,s as c,G as h,t as m,C as p,b as u,E as g,u as w,v as x,U as b,V as f,w as y,x as P,Q as v}from"./three-I9jKQkus.js";import{d as A,A as C,B as W,g as j,j as F,F as E,o as q}from"./@vue-89U3BwR9.js";const D=A({__name:"ModelView1",setup(e){const A=new class extends s{constructor(){super(),t(this,"texture"),t(this,"mixer"),t(this,"composer")}load(){this.init("#webgl"),this.animate(),this.light(),this.gridHelper(),this.create()}create(){const e=new n,t=new a;t.setDecoderPath("./draco/"),e.setDRACOLoader(t),e.load("./models/model04.gltf",(e=>{var t,s;const n=e.scene;n.scale.set(40,40,40),null==(t=this.scene)||t.add(n),this.mixer=new i(n);const a=this.mixer.clipAction(e.animations[0]),A=this.mixer.clipAction(e.animations[2]);this.mixer.clipAction(e.animations[3]);const C=this.mixer.clipAction(e.animations[4]);this.mixer.clipAction(e.animations[5]),A.play(),a.play(),C.play(),A.timeScale=5;const W=new r(new o(0,0,1),0),j=n.clone(),F=new l,E=new d(75,innerWidth/innerHeight,.1,2e3);E.position.set(0,100,150),new c(E,null==(s=this.renderer)?void 0:s.domElement);const q=new h;q.position.set(100,0,0),F.add(q);const D=new m({color:new p(16777215),depthTest:!0,transparent:!0});j.traverse((e=>{if(e instanceof u){e.material.wireframe=!0,e.material.colorWrite=!0,e.material.transparent=!0,e.material.depthWrite=!0,e.material.map=null,e.material.renderOrder=1,e.material.clippingPlanes=[W];const t=new v,s=new o,n=new o;e.getWorldQuaternion(t),e.getWorldPosition(s),e.getWorldScale(n);const a=new g(e.geometry,20),i=new w(a);D.opacity=1,i.material=D,i.quaternion.copy(t),i.position.copy(s),i.scale.copy(n),q.add(i)}})),this.renderer.localClippingEnabled=!0;const H=this.gui.addFolder("Local Clipping"),M={get Plane(){return W.constant},set Plane(e){W.constant=e}};H.add(M,"Plane",-125,125);const N={threshold:0,strength:1,radius:.5,exposure:1},O=new x(this.scene,this.camera),B=new x(F,E);B.clear=!1;const L=new b(new f(window.innerWidth,window.innerHeight),1.5,.4,.85);L.threshold=N.threshold,L.strength=N.strength,L.radius=N.radius;const Q=new y;this.composer=new P(this.renderer),this.composer.addPass(O),this.composer.addPass(B),this.composer.addPass(L),this.composer.addPass(Q);const S=this.gui.addFolder("bloom");S.add(N,"threshold",0,1).onChange((function(e){L.threshold=Number(e)})),S.add(N,"strength",0,3).onChange((function(e){L.strength=Number(e)})),this.gui.add(N,"radius",0,1).step(.01).onChange((function(e){L.radius=Number(e)}));this.gui.addFolder("tone mapping").add(N,"exposure",.1,2).onChange((e=>{this.renderer.toneMappingExposure=Math.pow(e,4)}))}))}animate(){var e,t,s,n;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.mixer&&(null==(t=this.mixer)||t.update(this.clock.getDelta())),null==(s=this.composer)||s.render(),null==(n=this.stats)||n.end()}};return C((()=>{A.load()})),W((()=>{A.gui.close(),A.gui.destroy()})),(e,t)=>(q(),j(E,null,[t[0]||(t[0]=F("div",{id:"webgl"},null,-1)),t[1]||(t[1]=F("div",{class:"title-name"},"模型1",-1))],64))}});export{D as default};
