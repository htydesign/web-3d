var s=Object.defineProperty,e=(e,t,i)=>((e,t,i)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);import{W as t}from"./webgpuBasic-RWdrGxvh.js";import{bs as i,a,C as n,P as r,bC as o,T as l,aW as c,b_ as h,bi as d,bK as u,c1 as m,bl as p,bk as b,bE as g,bg as w,bx as y,b as v,bF as P,bG as j}from"./three-BHpSmIVb.js";import{d as x,g as f,j as T,k as _,l as A,F as L,o as C}from"./@vue-H0c_gk4m.js";import{_ as I}from"./index-DcliGhKH.js";import"./pinia-DiTk8w0t.js";import"./vue-router-DusXlGQI.js";const z=I(x({__name:"Index",setup(s){const x=new class extends t{constructor(){super(new a(0,0,50)),e(this,"uTime",i(0)),e(this,"postProcessing")}load(){var s;this.renderer.setClearColor(new n(6710886)),this.init("#webgl"),this.addObject(),this.sceneEnvironment(),this.initPostProcessing(),null==(s=this.renderer)||s.setAnimationLoop((()=>{var s,e;null==(s=this.stats)||s.begin(),this.time+=.01,this.uTime.value=this.time,this.renderer.renderAsync(this.scene,this.camera),null==(e=this.stats)||e.end()}))}addObject(){var s;const e=new r(100,60,256,256);e.rotateX(.5*-Math.PI);const t=new o({transparent:!0});let i=(new l).load("../texture/vc_cell.jpg");i.colorSpace=c,i.wrapT=h,i.wrapS=h,i.repeat.set(2,2);const a=d((()=>{const s=u(m(p().mul(b(10)),this.uTime.mul(.5)),10,.1),e=m(s),t=g(p().sub(b(.5)));let a=w(i,p().mul(s).mul(t));return y(e,1).mulAssign(a)}));t.colorNode=a();const n=new v(e,t);n.rotateX(.5*Math.PI),null==(s=this.scene)||s.add(n)}initPostProcessing(){this.postProcessing=new P(this.renderer);const s=j(this.scene,this.camera).getTextureNode(),e=u(m(p().mul(b(20)),this.uTime.mul(.5)),.1,0);this.postProcessing.outputNode=s.add(s.sample(p().add(e)))}addLight(){this.light({type:"AmbientLight",x:30,y:30,z:30,intensity:1e3}),this.light({type:"PointLight",x:-30,y:30,z:0,intensity:1e3}),this.light({type:"AmbientLight",x:0,y:-30,z:-30,intensity:1e3})}};return f((()=>{x.load()})),T((()=>{x.destroy()})),(s,e)=>(C(),_(L,null,[e[0]||(e[0]=A("div",{id:"webgl"},null,-1)),e[1]||(e[1]=A("div",{class:"title-name"},"模型",-1))],64))}}),[["__scopeId","data-v-e0cc43b3"]]);export{z as default};
