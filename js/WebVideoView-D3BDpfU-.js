import{d as e,r as a,z as t,g as i,j as s,x as n,o as l}from"./@vue-B4sUqkWa.js";import{_ as o}from"./index-BIx9tGI1.js";import"./pinia-C4SihLJg.js";import"./vue-router-CANWKAPm.js";import"./three-nzgV1uvU.js";const r={class:"video-container"},c=o(e({__name:"WebVideoView",setup(e){const o=a(null);let c=null,u=null;const v=a([]),d=a(0),m=async e=>{c&&c.getTracks().forEach((e=>e.stop()));try{const a=(e=>({video:{deviceId:e?{exact:e.deviceId}:void 0,facingMode:e?void 0:"user"},audio:!1}))(e),t=await navigator.mediaDevices.getUserMedia(a);o.value&&(o.value.srcObject=t,o.value.play(),e&&/back|rear/i.test(e.label)?o.value.style.transform="scaleX(1)":o.value.style.transform="scaleX(-1)"),c=t,u=e}catch(a){}},p=async()=>{const e=await(async()=>(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)))();if(!e||0===e.length)return;d.value>=e.length-1?d.value=0:d.value++;const a=e[d.value];m(a||null)},f=async()=>{const e=await navigator.mediaDevices.enumerateDevices();v.value=e;const a=e.find((e=>"videoinput"===e.kind&&/back|rear/i.test(e.label)));a&&m(a)};return t((()=>{m(null)})),(e,a)=>(l(),i("div",r,[s("p",null,n(v.value),1),s("button",{onClick:p},"切换摄像头"),s("button",{onClick:f},"后置摄像头"),s("video",{ref_key:"videoRef",ref:o,playsinline:""},null,512)]))}}),[["__scopeId","data-v-208dbf54"]]);export{c as default};
