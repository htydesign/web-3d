import{d as e,r as a,z as i,g as t,j as n,x as s,o}from"./@vue-B4sUqkWa.js";import{_ as r}from"./index-CjOJBbQt.js";import"./pinia-C4SihLJg.js";import"./vue-router-CANWKAPm.js";import"./three-nzgV1uvU.js";const c={class:"video-container"},l=r(e({__name:"WebVideoView",setup(e){const r=a(null);let l=null,d=null;const u=a([]),v=async e=>{l&&l.getTracks().forEach((e=>e.stop()));try{const a=(e=>({video:{deviceId:e?{exact:e.deviceId}:void 0,facingMode:e?void 0:"user"},audio:!1}))(e),i=await navigator.mediaDevices.getUserMedia(a);r.value&&(r.value.srcObject=i,r.value.play(),r.value.style.transform="scaleX(-1)"),l=i,d=e}catch(a){}},p=async()=>{const e=await(async()=>(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)))();if(!e||0===e.length)return;const a=e.find((e=>e!==d));v(a||null)},f=async()=>{const e=await navigator.mediaDevices.enumerateDevices();u.value=e;const a=e.find((e=>"videoinput"===e.kind&&/back|rear/i.test(e.label)));a&&v(a)};return i((()=>{v(null)})),(e,a)=>(o(),t("div",c,[n("p",null,s(u.value),1),n("button",{onClick:p},"切换摄像头"),n("button",{onClick:f},"后置摄像头"),n("video",{ref_key:"videoRef",ref:r,playsinline:""},null,512)]))}}),[["__scopeId","data-v-f2d75da0"]]);export{l as default};
