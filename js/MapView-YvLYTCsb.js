import{R as e,al as t,am as o,an as n,ag as a,c as s,V as i,B as r,f as d}from"./three-1nqLwmXn.js";import{A as c}from"./@amap-DgZfE03j.js";import{d as w,z as l,g as m,j as p,F as u,o as h}from"./@vue-B4sUqkWa.js";import{_ as f}from"./index-DhiNE6F4.js";import"./pinia-C4SihLJg.js";import"./vue-router-CANWKAPm.js";const g=f(w({__name:"MapView",setup:w=>(l((()=>{c.load({key:"d70a60795659efc7fbaeac74746349c8",version:"2.0",plugins:[],Loca:{version:"2.0.0"}}).then((c=>{const w=new c.Map("webgl",{center:[116.54,39.79],zooms:[2,20],zoom:4,pitch:0,viewMode:"3D",mapStyle:"amap://styles/dark"}),l=w.customCoords;l.setCenter([116.54,39.79]);l.lngLatsToCoords([[116.52,39.79],[116.54,39.79],[116.56,39.79]]);const m=new e(60,window.innerWidth/window.innerHeight,100,1<<30);let p;const u=new t,h=new c.GLCustomLayer({zIndex:120,zoom:4,init:e=>{p=new o({context:e}),p.setPixelRatio(window.devicePixelRatio),p.autoClear=!1;const t=new n(16777215,.3),m=new a(16777215,1);m.position.set(1e3,-100,900),u.add(m),u.add(t),fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000.json").then((e=>e.json())).then((e=>{const t=l.lngLatsToCoords([...e.features[0].geometry.coordinates[0][0]]),o=new s({color:255}),n=[];for(let s=0;s<t.length;s++)n.push(new i(...t[s],4.5));const a=(new r).setFromPoints(n),m=new d(a,o);u.add(m);const p=e.features[0].geometry.coordinates[0][0],h=new c.Polyline({path:p,strokeWeight:4,strokeColor:"white",lineJoin:"round",strokeOpacity:1});w.add(h)}))},render:()=>{p.resetState(),l.setCenter([116.52,39.79]);const{near:e,far:t,fov:o,up:n,lookAt:a,position:s}=l.getCameraParams();m.near=e,m.far=t,m.fov=o,m.position.set(s[0],s[1],s[2]),m.up.set(n[0],n[1],n[2]),m.lookAt(a[0],a[1],a[2]),m.updateProjectionMatrix(),p.render(u,m),p.resetState()}});w.add(h),function e(){w.render(),requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),p.setSize(window.innerWidth,window.innerHeight)}))})).catch((e=>{}))})),(e,t)=>(h(),m(u,null,[t[0]||(t[0]=p("div",{id:"webgl"},null,-1)),t[1]||(t[1]=p("div",{class:"title-name"},"地图1",-1))],64)))}),[["__scopeId","data-v-36c010a1"]]);export{g as default};
