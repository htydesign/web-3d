var e=Object.defineProperty,n=(n,a,t)=>((n,a,t)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t)(n,"symbol"!=typeof a?a+"":a,t);import{B as a}from"./base-CU2FGtE4.js";import{G as t,C as o,an as s,P as i,M as r,D as l,b as c,S as h,B as d}from"./three-BbqIY5yL.js";import{d as u,z as v,A as m,g,j as p,F as f,o as w}from"./@vue-DISYwsDo.js";const b=u({__name:"FogView",setup(e){const u=new class extends a{constructor(){super(),n(this,"group",new t)}load(){var e;this.init("#webgl"),this.animate(),this.scene.background=new o(4473924);const n={fog:!1};null==(e=this.scene)||e.add(this.group),this.create(!0),this.gui.add(n,"fog").name("雾化：shader | THREE.Fog").onChange((()=>{this.group.children.length&&(n.fog?(this.scene.fog=new s(4473924,1,500),this.create(!1)):(this.scene.fog=null,this.create(!0)))}))}create(e=!1){var n,a;this.group.children.length&&this.group.clear();const t=new i(2e3,2e3),s=new r({color:3355443,side:l}),u=new c(t,s);u.rotateX(-Math.PI/2),null==(n=this.scene)||n.add(u);const v=new h({transparent:!0,uniforms:{uColor:{value:new o(16777215*Math.random())}},vertexShader:"\n          varying vec3 vPosition;\n          void main() {\n            vPosition =  vec3(projectionMatrix * modelMatrix * vec4( position, 1.0 ));\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }\n        ",fragmentShader:"\n          uniform vec3 uColor;\n\n          varying vec3 vPosition;\n\n          void main(){\n            vec3 center = vec3(0.0, 0.0, 0.0);\n            float dis = length(center.xz - vPosition.xz);\n\n            float alpha = 1.0;\n\n            vec3 color2 = vec3(0.3, 0.3, 0.3);\n\n            vec3 vColor = uColor;\n\n            if(dis >= 400.0){\n              alpha = 0.05;\n            }else if(dis > 200.0 && dis < 400.0){\n              // alpha = 0.1;\n              alpha = smoothstep(0.05, 1.0, 1.0 - (dis - 200.0) / 200.0);   \n              // vColor = mix(uColor,color2,(dis - 200.0) / 200.0);                 \n            }\n            gl_FragColor = vec4(vColor, alpha);               \n            \n          }\n        "}),m=new r({color:new o(16777215*Math.random()),transparent:!0,opacity:1});for(let o=0;o<1e3;o++){const n=75*Math.random()+25,t=new d(10,n,10),o=new c(t,e?v:m);o.position.set(2e3*Math.random()-1e3,n/2+.5,2e3*Math.random()-1e3),null==(a=this.group)||a.add(o)}}animate(){var e,n;null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),this.renderer&&this.renderer.render(this.scene,this.camera),null==(n=this.stats)||n.end()}};return v((()=>{u.load()})),m((()=>{u.destroy()})),(e,n)=>(w(),g(f,null,[n[0]||(n[0]=p("div",{id:"webgl"},null,-1)),n[1]||(n[1]=p("div",{class:"title-name"},"雾化",-1))],64))}});export{b as default};
