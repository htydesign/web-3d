var t=Object.defineProperty,i=(i,a,s)=>((i,a,s)=>a in i?t(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s)(i,"symbol"!=typeof a?a+"":a,s);import{d as a,g as s,j as e,F as n,o as h}from"./@vue-DISYwsDo.js";import{_ as c}from"./index-CrL2yp6d.js";import"./pinia-DkR6u-JQ.js";import"./vue-router-kKGLm7zb.js";import"./three-CQ-nF5qD.js";const l=c(a({__name:"AudioView",setup(t){const a=new class{constructor(){i(this,"canvas"),i(this,"ctx"),i(this,"canvas2"),i(this,"ctx2"),i(this,"audioElement"),i(this,"analyser"),i(this,"frequencyData")}getAudioData(){if(!this.audioElement||!this.ctx2)return;const t=new window.AudioContext,i=t.createMediaElementSource(this.audioElement);i.connect(t.destination),this.analyser=t.createAnalyser(),i.connect(this.analyser),this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount),this.ctx2.lineWidth=4,this.ctx2.translate(this.canvas2.width/2,this.canvas2.height/2),this.ctx2.arc(0,0,50,0,2*Math.PI),this.ctx2.fill(),this.draw()}draw(){var t;this.analyser&&this.ctx&&this.ctx2&&(this.analyser.getByteFrequencyData(this.frequencyData),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx2.clearRect(-this.canvas2.width/2,-this.canvas2.height/2,this.canvas2.width,this.canvas2.height),null==(t=this.frequencyData)||t.forEach(((t,i)=>{var a,s,e,n,h,c;i%10==0&&(null==(a=this.ctx)||a.fillRect(this.canvas.width/this.frequencyData.length*i+3,0,2,t),null==(s=this.ctx2)||s.beginPath(),null==(e=this.ctx2)||e.moveTo(0,0),null==(n=this.ctx2)||n.lineTo((t/2+50)*Math.sin(i*Math.PI/180),(t/2+50)*Math.cos(i*Math.PI/180)),null==(h=this.ctx2)||h.stroke(),null==(c=this.ctx2)||c.closePath())})),this.ctx2.arc(0,0,50,0,2*Math.PI),this.ctx2.fill(),window.requestAnimationFrame(this.draw.bind(this)))}init(t,i){var a,s;if(this.canvas=document.getElementById(t),this.ctx=null==(a=this.canvas)?void 0:a.getContext("2d"),this.canvas&&this.ctx&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight/2),this.canvas2=document.getElementById(i),this.ctx2=null==(s=this.canvas2)?void 0:s.getContext("2d"),this.canvas2&&this.ctx2&&(this.canvas2.width=window.innerWidth,this.canvas2.height=window.innerHeight/2),this.audioElement=document.getElementById("audio"),this.ctx&&this.ctx2){const t=this.ctx.createLinearGradient(0,0,0,this.canvas.height/3);t.addColorStop(0,"red"),t.addColorStop(.5,"yellow"),t.addColorStop(1,"blue"),this.ctx.fillStyle=t;const i=this.ctx2.createRadialGradient(0,0,0,0,0,200);i.addColorStop(0,"red"),i.addColorStop(1,"blue"),this.ctx2.fillStyle="red",this.ctx2.strokeStyle=i}this.audioElement&&(this.audioElement.play(),this.getAudioData())}},c=()=>{a.init("canvas","canvas2")};return(t,i)=>(h(),s(n,null,[e("div",{id:"webgl"},[i[0]||(i[0]=e("canvas",{id:"canvas"},null,-1)),i[1]||(i[1]=e("canvas",{id:"canvas2"},null,-1)),i[2]||(i[2]=e("audio",{id:"audio",src:"../../public/music/xiaomeiman.mp3"},null,-1)),e("div",{id:"play",style:{"--w":"100px"},onClick:c},"开始")]),i[3]||(i[3]=e("div",{class:"title-name"},"music",-1))],64))}}),[["__scopeId","data-v-47b64fd4"]]);export{l as default};
