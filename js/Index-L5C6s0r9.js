var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{W as t}from"./webgpuBasic-WoFTiwmu.js";import{bc as a,bd as n,bO as i,bp as r,bq as l,bP as o,be as d,bQ as c,bR as u,bM as h,bh as b,bN as m,bl as p,bS as y,bk as g,bT as w,bg as v,bj as j}from"./three-BbqIY5yL.js";import{d as f,z as x,A,g as H,j as M,F as P,o as I}from"./@vue-DISYwsDo.js";(new a).load("../texture/meinv.jpg");const O=f({__name:"Index",setup(e){const f=new class extends t{constructor(){super(new r(0,0,40)),s(this,"material"),s(this,"playHead",i(0))}load(){var e;this.renderer.setClearColor(new l(16777215)),this.init("#webgl"),this.material=new n,this.addObject(),this.light({type:"DirectionalLight",x:0,y:20,z:20,intensity:100}),null==(e=this.renderer)||e.setAnimationLoop((()=>{var e,s;null==(e=this.stats)||e.begin(),this.time-=.002,this.playHead.value=this.time,this.renderer.renderAsync(this.scene,this.camera),null==(s=this.stats)||s.end()}))}addObject(){var e;const s=(new a).load("./texture/wenli_2.jpg");s.wrapS=o,s.wrapT=o,s.repeat.set(10,10);const t=document.createElement("video");t.src="./texture/sintel.mp4",t.muted=!0,t.play();const n=new d(t);const i=new c(((e,s,t)=>{const a=function(e,s,t,a,n){const i=1-n;return 70*i*i*i+-0*n*i*i+-1*n*n*i+2*n*n*n}(0,0,0,0,s);const n=a*Math.sin(e*Math.PI*2),i=a*Math.cos(e*Math.PI*2),r=20*(s-.5);t.set(n,i,r)}),250,250),r=new u({side:h,color:153,metalness:.5,roughness:.5}),l=b((()=>{const e=p(y(g().y.add(this.playHead)).mul(20)),t=y(w(e.mul(123)).mul(456789.123)),a=g().toVar();a.y.addAssign(this.playHead),a.y.mulAssign(20),a.y.addAssign(this.playHead);let i=t.mul(.1).add(.5);a.x.addAssign(this.playHead.mul(i));const r=v(s,a),l=j(g()),o=v(n,l);return r.add(o.mul(10))}));r.colorNode=l(),r.roughnessNode=l();const f=new m(i,r);f.rotateX(-Math.PI/2),null==(e=this.scene)||e.add(f)}};return x((()=>{f.load()})),A((()=>{f.destroy()})),(e,s)=>(I(),H(P,null,[s[0]||(s[0]=M("div",{id:"webgl"},null,-1)),s[1]||(s[1]=M("div",{class:"title-name"},"sprite",-1))],64))}});export{O as default};
