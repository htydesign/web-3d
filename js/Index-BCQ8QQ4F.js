var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{W as t}from"./webgpuBasic-D-mbSDH1.js";import{T as a,bc as n,bp as i,a as r,C as l,e as o,aU as d,bq as c,br as u,D as h,bg as m,bk as p,bs as b,bj as y,be as g,bi as w,b as v}from"./three-CQ-nF5qD.js";import{d as j,z as f,A as x,g as A,j as H,F as M,o as I}from"./@vue-DISYwsDo.js";(new a).load("../texture/meinv.jpg");const P=j({__name:"Index",setup(e){const j=new class extends t{constructor(){super(new r(0,0,40)),s(this,"material"),s(this,"playHead",i(0))}load(){var e;this.renderer.setClearColor(new l(16777215)),this.init("#webgl"),this.material=new n,this.addObject(),this.light({type:"DirectionalLight",x:0,y:20,z:20,intensity:100}),null==(e=this.renderer)||e.setAnimationLoop((()=>{var e,s;null==(e=this.stats)||e.begin(),this.time-=.002,this.playHead.value=this.time,this.renderer.renderAsync(this.scene,this.camera),null==(s=this.stats)||s.end()}))}addObject(){var e;const s=(new a).load("./texture/scaling.png");s.wrapS=o,s.wrapT=o,s.repeat.set(10,10);const t=document.createElement("video");t.src="./texture/sintel.mp4",t.muted=!0,t.play();const n=new d(t);const i=new c(((e,s,t)=>{const a=function(e,s,t,a,n){const i=1-n;return 40*i*i*i+-10*n*i*i+1*n*n*i+5*n*n*n}(0,0,0,0,s);const n=a*Math.sin(e*Math.PI*2),i=a*Math.cos(e*Math.PI*2),r=20*(s-.5);t.set(n,i,r)}),250,250),r=new u({side:h,color:153,metalness:.5,roughness:.5}),l=m((()=>{p(b(y().y.add(this.playHead)).mul(2));const e=b(1),t=y().toVar();t.y.addAssign(this.playHead),t.y.mulAssign(20),t.y.addAssign(this.playHead.mul(.01));let a=e.mul(.1).add(.5);t.x.addAssign(this.playHead.mul(a));const i=g(s,t),r=w(y());return g(n,r),i}));r.colorNode=l(),r.roughnessNode=l();const j=new v(i,r);j.rotateX(-Math.PI/2),null==(e=this.scene)||e.add(j)}};return f((()=>{j.load()})),x((()=>{j.destroy()})),(e,s)=>(I(),A(M,null,[s[0]||(s[0]=H("div",{id:"webgl"},null,-1)),s[1]||(s[1]=H("div",{class:"title-name"},"sprite",-1))],64))}});export{P as default};
